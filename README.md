# 音频频响曲线分析工具

一个专业的网页版音频分析工具，用于分析和对比音频设备和音频文件的频率响应特性和动态范围特性。

## 功能特点

### 频响分析
- 使用1/3倍频程分析方法
- 支持20Hz-20kHz频率范围
- 自动归一化处理
- 多文件对比功能
- 数据导出功能

### 动态范围分析
- 符合专业音响标准的分析方法：
  - 使用1/3倍频程分析（ISO标准频段）
  - 应用A加权滤波，符合人耳感知特性
  - Fast响应（125ms）和Slow响应（1000ms）双时间常数分析
  - 符合IEC 60268-16和ITU-R BS.1770等专业标准

- 专业测量指标：
  - 真峰值电平（True Peak Level）：反映设备的过载余量
  - 峰值因数（Crest Factor）：反映设备处理瞬态信号的能力
  - 频段动态范围（Fast/Slow）：反映各频段的信噪比性能
  - 短时动态范围（100ms窗口，符合EBU R128）：反映瞬态响应性能

- 设备性能评估：
  - 动态范围：>90dB表示优秀的信噪比
  - 频段均衡性：评估全频段性能表现
  - Fast/Slow响应：评估瞬态处理能力
  - 峰值处理：>15dB的峰值因数表示充足的动态余量
  - 底噪控制：评估设备的本底噪声水平
  - 动态精度：评估动态信号的处理精度

- 统计分析：
  - 10-90百分位动态范围
  - 1/3倍频程频段分析
  - 短时响度分析

## 使用方法

1. 上传音频文件：
   - 支持WAV、MP3、OGG、FLAC等格式
   - 文件大小限制：100MB

2. 查看分析结果：
   - 频响曲线图：显示频率响应特性
   - 动态范围分析：
     - 频段动态范围图：显示各频段的动态特性
     - 短时动态范围图：显示时域动态变化
   - 设备性能指标：
     - 动态范围和信噪比
     - 瞬态响应性能
     - 频段均衡性
     - 动态处理精度

3. 数据对比：
   - 支持多个音频文件同时分析
   - 可切换显示不同文件的数据
   - 支持导出分析数据

## 技术实现

- 前端框架：React + TypeScript
- 音频分析：Web Audio API
- 图表绘制：ECharts
- UI组件：Ant Design
- 数据处理：
  - 1/3倍频程分析
  - A加权滤波
  - 时间加权处理
  - 统计分析

## 开发环境

- Node.js >= 16.6.1
- npm >= 8.0.0

## 安装和运行

### 后端服务
1. 进入后端目录：
   ```bash
   cd backend
   ```

2. 创建虚拟环境（推荐）：
   ```bash
   python -m venv venv
   
   # Windows激活虚拟环境
   venv\Scripts\activate
   
   # Linux/Mac激活虚拟环境
   source venv/bin/activate
   ```

3. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```

4. 启动服务：
   ```bash
   uvicorn app.main:app --reload --host 0.0.0.0 --port 8000
   ```

   服务将在 http://localhost:8000 上运行

### 前端服务
1. 安装依赖：
   ```bash
   npm install
   ```

2. 启动开发服务器：
   ```bash
   npm run dev
   ```

3. 构建生产版本：
   ```bash
   npm run build
   ```

## 配置说明

### 后端配置（config.yaml）
```yaml
audio:
  # 最长音频时间限制（秒）
  max_duration: 3000
  # 单次最大上传文件个数
  max_files: 10
```

## 注意事项

1. 分析准确性：
   - 使用标准测试信号获得最准确的结果
   - 环境噪声可能影响测量结果
   - 建议多次测量取平均值

2. 文件格式：
   - 推荐使用无损格式（WAV、FLAC）
   - 采样率建议≥44.1kHz
   - 位深度建议≥16bit

3. 系统要求：
   - 现代浏览器（支持Web Audio API）
   - 建议使用Chrome或Firefox
   - 需要足够的系统内存处理大文件

4. 设备性能评估标准：
   - 动态范围：专业设备通常>90dB
   - 峰值因数：优秀设备>15dB
   - 频段均衡性：±3dB以内为佳
   - 瞬态响应：Fast/Slow响应差异<10dB为佳

## 许可证

MIT License
